# Cosmetics-KG
## 1. 项目介绍
[项目整体代码](https://github.com/cxcygzs/Cosmetics-KG)
[前端代码](https://github.com/cxcygzs/Cosmetics-KG/tree/master/CosmeticsKG-Web-master)
[后端代码](https://github.com/cxcygzs/Cosmetics-KG/tree/master/CosmeticsKG-master)
本项目选取化妆品（以💄为主）为主题，构建该领域知识图谱；并基于图谱完成商品检索、图谱可视化和问答系统的任务。
由于缺少<问题，答案>训练数据集，目前大多数的小规模领域知识图谱都已基于规则的方法实现。 其中，使用最广泛的是模板匹配方法，即人工编写问题模板及对应的查询语句映射，然后根据问题的词语特征匹配模板，并根据一定规则转换为查询语句。
本项目提出了一个新的基于符号逻辑的问答方法，该方法立足句法分析层面，根据一定规则对问句的依存句法树进行剪枝， 得到能够一定程度上表示问句语义和查询意图的问题图，并通过解析器解析为查询语句进而完成答案生成。 该方法无需手工书写问题模板，大大节省了知识图谱问答系统的设计时间，并在本项目中取得了良好效果。 希望本方法能够为其他主题的领域知识图谱的问答系统提供一种基础的、简单的解决方案。
## 2. 知识获取
数据来源主要包括化妆品官网（弃用）、美妆APP“心心”和电商网站京东。 官网和APP主要是获取正规的化妆品图片、信息、颜色数值等基本信息； 电商是为了获取价格和评论信息。
爬取APP数据使用了抓包软件Fiddler拦截手机向服务器发送的数据包来完成。 由于APP的请求参数包含加密token因此无法直接通过发送请求完成数据获取工作（技术大佬也可以尝试反编译APP获得token加密算法）。 电商数据使用Selenium爬取。
## 3. 知识融合和处理
根据化妆品品牌和编号（色号）对多源数据进行匹配融合。 此外，我们使用K-Means算法对口红的颜色进行聚类分析，将所有的口红颜色分为10个大类，便于挑选。
## 4. 知识存储
项目使用图数据库Neo4j存储数据。使用python语言写的[接口](https://github.com/cxcygzs/Cosmetics-KG/tree/master/%E6%9E%84%E5%BB%BA%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1)将爬取的数据导入到图数据库中，以此来构建化妆品知识图谱。图数据库中包括3093个节点和4083条关系。图谱实体包括品牌(Brand)、品牌所属国家(Country)、香水产品(Perfume)、口红系 列(LipstickType)、口红产品(Lipstick)、价格区间(PriceRange)、评论(Comment)和颜色(Color)共8个节点以及6类关系。
## 5. 问答系统
基于知识图谱的问答系统分为两个步骤:首先把自然语言问题转化成对应的 查询语句，然后使用查询语句检索知识库得到答案。其中，如何正确的将自然语 言问题解析为查询语句是问答的关键。本系统运用一种基于规则和句法分析的问 句-问题图的转换方法，能够有效地将自然语言问题解析为知识图谱查询语句 (Cypher)，具体分为实体链接、句法分析、关键词识别、问题图转换、查询语句 生成和知识查询和答案生成共 6 个步骤。
## 6. 可视化及实现
本系统实现了一个基于 Web 的交互式可视化系统以完成图谱交互和问答系 统可视化。系统分为图谱交互和智能问答两大模块。前者实现了对知识图谱中的 实体查询、实体信息浏览、实体展开等操作。 后者可以让用户输入自然语言问题， 提交到问答系统并展示返回的答案。 知识图谱交互模块使用了 InteractiveGraph，该工具包括前端显示插件 InteractiveGraph 和数据库连接中间件 InteractiveGraph-Neo4j。 用户通过搜索框搜索到的化妆品会自动添加到图谱可视化控件中，供用户进行浏览、展开等操作。问答系统的后台由 SpringBoot 开发，解析前端发送的用户问题，查询数据并返回。 此外，页面中还使用了 Echarts.js展示句法树和问题图。
